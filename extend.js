/*! js weidian 2015-02-03 */
var E={iframe:{target:"",height:function(a){E.iframe.target.css({visibility:"hidden",display:"block"}),a=$(window.top.document.getElementById("theIframe").contentWindow.document.body).children().eq(0).height(),console.log(a),E.iframe.target.css({height:a+"px",visibility:"visible",display:"none"}),window.scroll(0,0),E.iframe.target.fadeIn()},src:function(a){E.iframe.init();var b=-1!=a.indexOf("?")?a+"&v="+M.version:a+"?v="+M.version;E.iframe.isFirst?E.iframe.target.attr("src",b):E.iframe.target.fadeOut(function(){E.iframe.target.attr("src",b)})},remove:function(){E.iframe.target.fadeOut(function(){E.iframe.target.remove(),$("#theIframeDiv").remove()})},reload:function(){var a=location.href;if(-1!=a.indexOf("code=")&&-1!=a.indexOf("&state=isWXAddr")){var b=a.indexOf("code="),c=a.substr(b),d=c.substr(0,c.indexOf("&state=isWXAddr")),e=-1!=a.indexOf("isWXAddr&")?"isWXAddr&":"isWXAddr",f=-1!=a.indexOf("&code=")?"&":"";a=a.replace(f+d+"&state="+e,"")}location.href=a},isFirst:!1,init:function(){if($("#theIframe").length())E.iframe.isFirst=!1;else{var a=document.createElement("div");a.setAttribute("id","theIframeDiv"),document.body.appendChild(a);var b=document.createElement("iframe");b.setAttribute("id","theIframe"),a.appendChild(b),E.iframe.isFirst=!0}E.iframe.target=$("#theIframe")}},string:{trim:function(a){var b;return b=a.replace(/(^\s+)|(\s+$)/g,""),b=b.replace(/\s/g,"")},checkTel:function(a){return E.string.trim(a).length<10?!1:!0},htmlSpecialChars:function(a){if(0==a.length)return"";for(var b=a.length,c="",d=0;b>d;d++)switch(a.substr(d,1)){case"<":c+="&lt;";break;case">":c+="&gt;";break;case"&":c+="&amp;";break;case'"':c+="&quot;";break;case"\n":c+="<br>";break;default:c+=a.substr(d,1)}return c}},switchAddrInfo:function(a,b){var c=a.prov,d=a.city,e=a.dist;M.loadScript("http://s.koudai.com/script/common/regions.js",function(){for(var a=new Object,f=regions.length,g=f;g--;){var h=regions[g];if(0==c.indexOf(h.des)||0==h.des.indexOf(c)){a.prov=h.des,a.prov_id=h.rID;for(var i=h.son.length,j=i;j--;){var k=h.son[j];if(d="县"==d?c:d,0==d.indexOf(k.des)||0==k.des.indexOf(d)){a.city=k.des,a.city_id=k.rID;for(var l=k.son.length,m=l;m--;){var n=k.son[m];if(0==e.indexOf(n.des)||0==n.des.indexOf(e)){a.dist=n.des,a.dist_id=n.rID;break}}break}}break}}b&&b(a)})},getMap:{doData:function(a){function b(b){M.get("http://maps.google.com/maps/api/geocode/json?latlng="+b.coords.latitude+","+b.coords.longitude+"&language=zh-CN&sensor=false",function(b){a(b.results[0].address_components,b.results[0].formatted_address)})}function c(a){switch(a.code){case a.TIMEOUT:dataJson=1,M._alert("连接超时，请重试");break;case a.PERMISSION_DENIED:dataJson=2,M._alert("您拒绝了使用位置共享服务，查询已取消");break;case a.POSITION_UNAVAILABLE:dataJson=3,M._alert("无法获取到您的所在地，请手工选择")}}dataJson="";var d={enableHighAccuracy:!0,maximumAge:3e4,timeout:2e4};navigator.geolocation.getCurrentPosition(b,c,d)}}};